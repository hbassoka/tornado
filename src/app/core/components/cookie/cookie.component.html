<!-- Bandeau compact -->
<div *ngIf="preferences === null" class="cookie-banner d-flex justify-content-between align-items-center p-2 bg-light border-top fixed-bottom">
  <span class="small text-muted">
    Ce site utilise des cookies pour améliorer votre expérience.
  </span>
  <div class="btn-group btn-group-sm">
    <button class="btn btn-success" (click)="acceptAll()">Tout accepter</button>
    <button class="btn btn-secondary" (click)="openSettings()">Personnaliser</button>
    <button class="btn btn-danger" (click)="declineAll()">Tout refuser</button>
  </div>
</div>

<!-- Modal compact -->
<div class="modal fade" tabindex="-1" [ngClass]="{'show d-block': showSettings}" [style.background]="'rgba(0,0,0,0.5)'">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Paramètres des cookies</h5>
        <button type="button" class="btn-close" (click)="closeSettings()"></button>
      </div>
      <div class="modal-body">
        <form>
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" [(ngModel)]="prefs.essential" name="essential" disabled checked>
            <label class="form-check-label">Essentiels (toujours actifs)</label>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" [(ngModel)]="prefs.analytics" name="analytics">
            <label class="form-check-label">Statistiques</label>
          </div>
          <div class="form-check mb-2">
            <input class="form-check-input" type="checkbox" [(ngModel)]="prefs.marketing" name="marketing">
            <label class="form-check-label">Marketing</label>
          </div>
        </form>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-success btn-sm" (click)="savePreferences()">Enregistrer</button>
        <button type="button" class="btn btn-secondary btn-sm" (click)="closeSettings()">Annuler</button>
      </div>
    </div>
  </div>
</div>
